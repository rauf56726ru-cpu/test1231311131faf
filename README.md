# Binance Chart Viewer

Проект свёрнут до минимального фронтенда и компактного API, которые отвечают только за построение свечного графика и получение исторических OHLCV-данных.

## Возможности
- Загрузка исторических свечей Binance для выбранного тикера и интервала.
- Отрисовка графика на базе Lightweight Charts: свечи, оси, масштабирование, навигация.
- Линия последней цены и краткая сводка по последней свече.
- Автозаполнение пропусков в данных через `ChartGapWatcher`.
- Живое обновление за счёт WebSocket-потока Binance.
- REST-эндпоинт `/ohlc`, возвращающий подготовленные свечи с таймфреймами `1m`, `3m`, `5m`, `15m`, `1h`, `4h`, `1d`.

## Как запустить
1. (опционально) Поднимите REST API:
   ```bash
   uvicorn src.api.app:app --reload
   ```
   Эндпоинт `/ohlc` возвращает JSON вида:
   ```json
   {
     "symbol": "BTCUSDT",
     "tf": "1m",
     "candles": [{"t": 1697049600000, "o": 1, "h": 1, "l": 1, "c": 1, "v": 1}],
     "last_price": 1,
     "last_ts": 1697049600000,
     "next_close_ts": 1697049660000,
     "time_to_close_ms": 5000
   }
   ```
2. Поднимите любой статический сервер в корне проекта, например:
   ```bash
   python -m http.server 8000
   ```
3. Откройте в браузере `http://localhost:8000/templates/index.html`.
4. Введите тикер (например, `BTCUSDT`) и выберите интервал свечей. График автоматически загрузит историю и переключится в режим реального времени.

## Структура
- `public/` &mdash; JS/стили для графика (`app.js`, `binanceCandles.js`, `chart-gap-watcher.js`, `styles.css`).
- `templates/index.html` &mdash; единственная страница с графиком и панелью управления.
- `src/` &mdash; минимальный FastAPI-проект с обработчиком `/ohlc` и вспомогательным модулем `services/ohlc.py`.
